---
import Layout from "@/layouts/LayoutMusic.astro"
import LiteYoutube from "@/components/ui/LiteYoutube.astro"

import { getVideoclips } from "@/api/getVideoclips"

const videoclips = await getVideoclips()

/* 
Forma de cargar un video local
<video id="myVideoPlayer" controls class="rounded-xl mt-20">
      <source
        src={`${import.meta.env.PUBLIC_BASE_PATH}videos/Tema El ultimo titan ( Rambla prim ).mp4`}
        type="video/mp4"
      />
      Tu navegador no soporta la etiqueta de video.
    </video>
 */
---

<Layout title="Videoclips">
  <div class="flex justify-center items-start flex-wrap">
    <div class="text-white text-center mt-4">
      <h1 transition:name="Videoclips">Videoclips</h1>
      <p>Todos mis clips sueltos.</p>
    </div>

    <div class="flex flex-row flex-wrap justify-center items-start gap-4">
      {
        videoclips.reverse().map((video, index) => {
          console.log(
            `${import.meta.env.PUBLIC_BASE_PATH}videos/${video.material}.mp4`,
            " la ruta que imprime"
          )
          return (
            <div class="m-2">
              {video.idYoutube ? (
                <div class="flex flex-col w-max">
                  <LiteYoutube
                    videoId={video.idYoutube}
                    title={video.titulo}
                    backgroundImage={`/music/thumnails-youtube/videoclips/${video.idYoutube}.jpg`}
                    className="w-[22rem] rounded-xl"
                  />
                  <p class="text-white font-semibold p-2">{video.titulo}</p>
                </div>
              ) : (
                /* <h1 class="text-7xl text-red-600">FALTA INFO</h1> */ <p />
              )}
            </div>
          )
        })
      }
    </div>
  </div>
</Layout>
